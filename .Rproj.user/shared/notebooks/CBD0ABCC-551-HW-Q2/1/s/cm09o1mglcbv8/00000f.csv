"0","library(glmnet)"
"0",""
"0","# Simulated example dataset"
"0","set.seed(123)"
"0","n <- 100"
"0","data <- data.frame("
"0","  ratio = rnorm(n, 1300, 100),"
"0","  contact = runif(n, 5, 23),"
"0","  conversion = rnorm(n, 0.03, 0.01),"
"0","  y = rnorm(n, 40, 10)"
"0",")"
"0",""
"0","# Add interaction and squared terms"
"0","data$ratio_sq <- data$ratio^2"
"0","data$contact_sq <- data$contact^2"
"0","data$conversion_sq <- data$conversion^2"
"0","data$ratiocontact <- data$ratio * data$contact"
"0","data$contactconversion <- data$contact * data$conversion"
"0","data$ratioconversion <- data$ratio * data$conversion"
"0",""
"0","# Prepare matrix for glmnet"
"0","X <- as.matrix(data[, c(""ratio"", ""contact"", ""conversion"", ""ratio_sq"", ""contact_sq"", ""conversion_sq"", ""ratiocontact"", ""contactconversion"", ""ratioconversion"")])"
"0","y <- data$y"
"0",""
"0","# Fit ridge regression"
"0","ridge_model <- glmnet(X, y, alpha = 0)  # alpha = 0 for ridge regression"
"0","ridge_cv <- cv.glmnet(X, y, alpha = 0)  # Cross-validation to find best lambda"
"0","ridge_best_lambda <- ridge_cv$lambda.min"
"0",""
"0","# Extract coefficients at best lambda"
"0","ridge_coefficients <- coef(ridge_cv, s = ridge_best_lambda)"
"0","print(ridge_coefficients)"
"1","10 x 1 sparse Matrix of class ""dgCMatrix""
"
"1","                 "
"1","            s1"
"1","
(Intercept)      "
"1","  4.125752e+01"
"1","
ratio            "
"1","  5.145622e-39"
"1","
contact          "
"1"," -3.678847e-38"
"1","
conversion       "
"1","  5.997559e-35"
"1","
ratio_sq         "
"1","  1.828757e-42"
"1","
contact_sq       "
"1"," -4.366979e-40"
"1","
conversion_sq    "
"1","  6.464200e-34"
"1","
ratiocontact     "
"1"," -3.078151e-42"
"1","
contactconversion"
"1","  9.398377e-37"
"1","
ratioconversion  "
"1","  5.034607e-38"
"1","
"
